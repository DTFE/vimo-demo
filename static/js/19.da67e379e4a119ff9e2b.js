webpackJsonp([19],{1161:function(i,t,n){var e=n(1162);"string"==typeof e&&(e=[[i.i,e,""]]),e.locals&&(i.exports=e.locals);n(738)("ffe0ae26",e,!0)},1162:function(i,t,n){t=i.exports=n(737)(),t.push([i.i,"","",{version:3,sources:[],names:[],mappings:"",file:"deeplink.vue",sourceRoot:""}])},1163:function(i,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var e=n(1164);n.n(e);t.default={name:"name",data:function(){return{timer:null}},methods:{viewInZhihuApp:function(){this.toAppOrDownload({urlScheme:"zhihu://questions/34831949?utm_campaign=ge19&utm_content=m_banner",universalLinks:"https://oia.zhihu.com/questions/34831949?utm_campaign=ge19"})},viewInNetEaseApp:function(){this.toAppOrDownload({urlScheme:"newsapp://doc/CLU0M6DS00097U7R?s=sps_ulink&ss=sps_article",universalLinks:"http://m.163.com/newsapp/applinks.html?path=%2Fdoc%2FCLU0M6DS00097U7R&s=sps_ulink&ss=sps_article"})},toAppOrDownload:function(i){var t=this;this.$platform.is("android")||this.$platform.is("ios")&&this.$platform.version().major<9?(window.location.href=i.urlScheme,this.timer=window.setTimeout(function(){window.location.href=i.universalLinks},1e3),window.visibly.onHidden(function(){window.clearTimeout(t.timer)})):window.location.href=i.universalLinks}},created:function(){},mounted:function(){},props:{},watch:{},computed:{},activated:function(){},deactivate:function(){},components:{},destroyed:function(){}}},1164:function(i,t){!function(){window.visibly={q:document,p:void 0,prefixes:["webkit","ms","o","moz","khtml"],props:["VisibilityState","visibilitychange","Hidden"],m:["focus","blur"],visibleCallbacks:[],hiddenCallbacks:[],genericCallbacks:[],_callbacks:[],cachedPrefix:"",fn:null,onVisible:function(i){"function"==typeof i&&this.visibleCallbacks.push(i)},onHidden:function(i){"function"==typeof i&&this.hiddenCallbacks.push(i)},getPrefix:function(){if(!this.cachedPrefix)for(var i,t=0;i=this.prefixes[t++];)if(i+this.props[2]in this.q)return this.cachedPrefix=i,this.cachedPrefix},visibilityState:function(){return this._getProp(0)},hidden:function(){return this._getProp(2)},visibilitychange:function(i){"function"==typeof i&&this.genericCallbacks.push(i);var t=this.genericCallbacks.length;if(t)if(this.cachedPrefix)for(;t--;)this.genericCallbacks[t].call(this,this.visibilityState());else for(;t--;)this.genericCallbacks[t].call(this,arguments[0])},isSupported:function(i){return this._getPropName(2)in this.q},_getPropName:function(i){return""===this.cachedPrefix?this.props[i].substring(0,1).toLowerCase()+this.props[i].substring(1):this.cachedPrefix+this.props[i]},_getProp:function(i){return this.q[this._getPropName(i)]},_execute:function(i){if(i){this._callbacks=1===i?this.visibleCallbacks:this.hiddenCallbacks;for(var t=this._callbacks.length;t--;)this._callbacks[t]()}},_visible:function(){window.visibly._execute(1),window.visibly.visibilitychange.call(window.visibly,"visible")},_hidden:function(){window.visibly._execute(2),window.visibly.visibilitychange.call(window.visibly,"hidden")},_nativeSwitch:function(){this[this._getProp(2)?"_hidden":"_visible"]()},_listen:function(){try{this.isSupported()?this.q.addEventListener(this._getPropName(1),function(){window.visibly._nativeSwitch.apply(window.visibly,arguments)},1):this.q.addEventListener?(window.addEventListener(this.m[0],this._visible,1),window.addEventListener(this.m[1],this._hidden,1)):this.q.attachEvent&&(this.q.attachEvent("onfocusin",this._visible),this.q.attachEvent("onfocusout",this._hidden))}catch(i){}},init:function(){this.getPrefix(),this._listen()}},window.visibly.init()}()},1165:function(i,t){i.exports={render:function(){var i=this,t=i.$createElement,n=i._self._c||t;return n("Page",[n("Header",[n("Navbar",[n("Title",[i._v("Deeplink")])],1)],1),i._v(" "),n("Content",{staticClass:"outer-content",attrs:{padding:""}},[n("h5",[i._v("简介")]),i._v(" "),n("p",[i._v("Deeplink用于跳转到原生App的方法, 如果安装了App则启动app并跳转, 如果没安装app则进入下载页面. 我这里只安装了知乎和网易新闻, 没安装Twitter. ")]),i._v(" "),n("h5",[i._v("原理")]),i._v(" "),n("p",[i._v("\n            目前主流的H5跳转APP(知乎/网易新闻)都是使用的window.location.href进行的. 在IOS中使用Universal Links, 在Android中使用URL Scheme方案. 且Universal Links指向的页面都为下载引导页.")]),i._v(" "),n("p",[i._v("此外, IOS的跳转很流畅, 但是Android的实现相对不太好. 因为会出现下载链接的提示. 通过设置setTimeout的解决方式不能完全解决问题, 故上面两个平台都未处理. 如果处理的话, 监听页面visibilitychange等事件接触定时器即可. ")]),i._v(" "),n("h5",[i._v("示例")]),i._v(" "),n("p",[i._v("知乎: JS判断APP是否安装?")]),i._v(" "),n("Grid",{attrs:{"no-padding":""}},[n("Row",[n("Column",[n("Button",{attrs:{small:"",outline:""},on:{click:i.viewInZhihuApp}},[i._v("在知乎App中浏览")])],1)],1)],1),i._v(" "),n("p",[i._v("网易新闻: 刘强东力挺顺丰：我相信王卫为人，质疑菜鸟违法")]),i._v(" "),n("Grid",{attrs:{"no-padding":""}},[n("Row",[n("Column",[n("Button",{attrs:{small:"",outline:""},on:{click:i.viewInNetEaseApp}},[i._v("在网易新闻中浏览")])],1)],1)],1)],1)],1)},staticRenderFns:[]}},1335:function(i,t,n){n(1161);var e=n(1)(n(1163),n(1165),"data-v-12c51c8f",null);i.exports=e.exports}});
//# sourceMappingURL=19.da67e379e4a119ff9e2b.js.map