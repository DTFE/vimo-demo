{"version":3,"sources":["webpack:///static/js/19.da67e379e4a119ff9e2b.js","webpack:///./examples/src/pages/deeplink/deeplink.vue?f3bb","webpack:///./examples/src/pages/deeplink/deeplink.vue?dd3f","webpack:///deeplink.vue","webpack:///./examples/src/pages/deeplink/visibly.js","webpack:///./examples/src/pages/deeplink/deeplink.vue?202a","webpack:///./examples/src/pages/deeplink/deeplink.vue"],"names":["webpackJsonp","1161","module","exports","__webpack_require__","content","i","locals","1162","push","version","sources","names","mappings","file","sourceRoot","1163","__webpack_exports__","Object","defineProperty","value","__WEBPACK_IMPORTED_MODULE_0__visibly__","n","name","data","timer","methods","viewInZhihuApp","this","toAppOrDownload","urlScheme","universalLinks","viewInNetEaseApp","options","_this","$platform","is","major","window","location","href","setTimeout","visibly","onHidden","clearTimeout","created","mounted","props","watch","computed","activated","deactivate","components","destroyed","1164","q","document","p","undefined","prefixes","m","visibleCallbacks","hiddenCallbacks","genericCallbacks","_callbacks","cachedPrefix","fn","onVisible","_callback","getPrefix","b","l","visibilityState","_getProp","hidden","visibilitychange","length","call","arguments","isSupported","index","_getPropName","substring","toLowerCase","_execute","_visible","_hidden","_nativeSwitch","_listen","addEventListener","apply","attachEvent","e","init","1165","render","_vm","_h","$createElement","_c","_self","_v","staticClass","attrs","padding","no-padding","small","outline","on","click","staticRenderFns","1335","Component"],"mappings":"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","file":"static/js/19.da67e379e4a119ff9e2b.js","sourcesContent":["webpackJsonp([19],{\n\n/***/ 1161:\n/***/ (function(module, exports, __webpack_require__) {\n\n// style-loader: Adds some css to the DOM by adding a <style> tag\n\n// load the styles\nvar content = __webpack_require__(1162);\nif(typeof content === 'string') content = [[module.i, content, '']];\nif(content.locals) module.exports = content.locals;\n// add the styles to the DOM\nvar update = __webpack_require__(738)(\"ffe0ae26\", content, true);\n\n/***/ }),\n\n/***/ 1162:\n/***/ (function(module, exports, __webpack_require__) {\n\nexports = module.exports = __webpack_require__(737)();\n// imports\n\n\n// module\nexports.push([module.i, \"\", \"\", {\"version\":3,\"sources\":[],\"names\":[],\"mappings\":\"\",\"file\":\"deeplink.vue\",\"sourceRoot\":\"\"}]);\n\n// exports\n\n\n/***/ }),\n\n/***/ 1163:\n/***/ (function(module, __webpack_exports__, __webpack_require__) {\n\n\"use strict\";\nObject.defineProperty(__webpack_exports__, \"__esModule\", { value: true });\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0__visibly__ = __webpack_require__(1164);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0__visibly___default = __webpack_require__.n(__WEBPACK_IMPORTED_MODULE_0__visibly__);\n\n\n\n/* harmony default export */ __webpack_exports__[\"default\"] = ({\n  name: 'name',\n  data: function data() {\n    return {\n      timer: null\n    };\n  },\n\n  methods: {\n    viewInZhihuApp: function viewInZhihuApp() {\n      this.toAppOrDownload({\n        urlScheme: 'zhihu://questions/34831949?utm_campaign=ge19&utm_content=m_banner',\n        universalLinks: 'https://oia.zhihu.com/questions/34831949?utm_campaign=ge19'\n      });\n    },\n    viewInNetEaseApp: function viewInNetEaseApp() {\n      this.toAppOrDownload({\n        urlScheme: 'newsapp://doc/CLU0M6DS00097U7R?s=sps_ulink&ss=sps_article',\n        universalLinks: 'http://m.163.com/newsapp/applinks.html?path=%2Fdoc%2FCLU0M6DS00097U7R&s=sps_ulink&ss=sps_article'\n      });\n    },\n    toAppOrDownload: function toAppOrDownload(options) {\n      var _this = this;\n\n      if (this.$platform.is('android') || this.$platform.is('ios') && this.$platform.version().major < 9) {\n        window.location.href = options.urlScheme;\n        this.timer = window.setTimeout(function () {\n          window.location.href = options.universalLinks;\n        }, 1000);\n\n        window.visibly.onHidden(function () {\n          window.clearTimeout(_this.timer);\n        });\n      } else {\n        window.location.href = options.universalLinks;\n      }\n    }\n  },\n  created: function created() {},\n  mounted: function mounted() {},\n\n  props: {},\n  watch: {},\n  computed: {},\n  activated: function activated() {},\n  deactivate: function deactivate() {},\n\n  components: {},\n  destroyed: function destroyed() {}\n});\n\n/***/ }),\n\n/***/ 1164:\n/***/ (function(module, exports) {\n\n\n\n;(function () {\n  window.visibly = {\n    q: document,\n    p: undefined,\n    prefixes: ['webkit', 'ms', 'o', 'moz', 'khtml'],\n    props: ['VisibilityState', 'visibilitychange', 'Hidden'],\n    m: ['focus', 'blur'],\n    visibleCallbacks: [],\n    hiddenCallbacks: [],\n    genericCallbacks: [],\n    _callbacks: [],\n    cachedPrefix: '',\n    fn: null,\n\n    onVisible: function onVisible(_callback) {\n      if (typeof _callback === 'function') {\n        this.visibleCallbacks.push(_callback);\n      }\n    },\n    onHidden: function onHidden(_callback) {\n      if (typeof _callback === 'function') {\n        this.hiddenCallbacks.push(_callback);\n      }\n    },\n    getPrefix: function getPrefix() {\n      if (!this.cachedPrefix) {\n        for (var l = 0, b; b = this.prefixes[l++];) {\n          if (b + this.props[2] in this.q) {\n            this.cachedPrefix = b;\n            return this.cachedPrefix;\n          }\n        }\n      }\n    },\n\n    visibilityState: function visibilityState() {\n      return this._getProp(0);\n    },\n    hidden: function hidden() {\n      return this._getProp(2);\n    },\n    visibilitychange: function visibilitychange(fn) {\n      if (typeof fn === 'function') {\n        this.genericCallbacks.push(fn);\n      }\n\n      var n = this.genericCallbacks.length;\n      if (n) {\n        if (this.cachedPrefix) {\n          while (n--) {\n            this.genericCallbacks[n].call(this, this.visibilityState());\n          }\n        } else {\n          while (n--) {\n            this.genericCallbacks[n].call(this, arguments[0]);\n          }\n        }\n      }\n    },\n    isSupported: function isSupported(index) {\n      return this._getPropName(2) in this.q;\n    },\n    _getPropName: function _getPropName(index) {\n      return this.cachedPrefix === '' ? this.props[index].substring(0, 1).toLowerCase() + this.props[index].substring(1) : this.cachedPrefix + this.props[index];\n    },\n    _getProp: function _getProp(index) {\n      return this.q[this._getPropName(index)];\n    },\n    _execute: function _execute(index) {\n      if (index) {\n        this._callbacks = index === 1 ? this.visibleCallbacks : this.hiddenCallbacks;\n        var n = this._callbacks.length;\n        while (n--) {\n          this._callbacks[n]();\n        }\n      }\n    },\n    _visible: function _visible() {\n      window.visibly._execute(1);\n\n      window.visibly.visibilitychange.call(window.visibly, 'visible');\n    },\n    _hidden: function _hidden() {\n      window.visibly._execute(2);\n\n      window.visibly.visibilitychange.call(window.visibly, 'hidden');\n    },\n    _nativeSwitch: function _nativeSwitch() {\n      this[this._getProp(2) ? '_hidden' : '_visible']();\n    },\n    _listen: function _listen() {\n      try {\n        if (!this.isSupported()) {\n          if (this.q.addEventListener) {\n            window.addEventListener(this.m[0], this._visible, 1);\n            window.addEventListener(this.m[1], this._hidden, 1);\n          } else {\n            if (this.q.attachEvent) {\n              this.q.attachEvent('onfocusin', this._visible);\n              this.q.attachEvent('onfocusout', this._hidden);\n            }\n          }\n        } else {\n          this.q.addEventListener(this._getPropName(1), function () {\n            window.visibly._nativeSwitch.apply(window.visibly, arguments);\n          }, 1);\n        }\n      } catch (e) {}\n    },\n    init: function init() {\n      this.getPrefix();\n      this._listen();\n    }\n  };\n\n  window.visibly.init();\n})();\n\n/***/ }),\n\n/***/ 1165:\n/***/ (function(module, exports) {\n\nmodule.exports={render:function (){var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;\n  return _c('Page', [_c('Header', [_c('Navbar', [_c('Title', [_vm._v(\"Deeplink\")])], 1)], 1), _vm._v(\" \"), _c('Content', {\n    staticClass: \"outer-content\",\n    attrs: {\n      \"padding\": \"\"\n    }\n  }, [_c('h5', [_vm._v(\"简介\")]), _vm._v(\" \"), _c('p', [_vm._v(\"Deeplink用于跳转到原生App的方法, 如果安装了App则启动app并跳转, 如果没安装app则进入下载页面. 我这里只安装了知乎和网易新闻, 没安装Twitter. \")]), _vm._v(\" \"), _c('h5', [_vm._v(\"原理\")]), _vm._v(\" \"), _c('p', [_vm._v(\"\\n            目前主流的H5跳转APP(知乎/网易新闻)都是使用的window.location.href进行的. 在IOS中使用Universal Links, 在Android中使用URL Scheme方案. 且Universal Links指向的页面都为下载引导页.\")]), _vm._v(\" \"), _c('p', [_vm._v(\"此外, IOS的跳转很流畅, 但是Android的实现相对不太好. 因为会出现下载链接的提示. 通过设置setTimeout的解决方式不能完全解决问题, 故上面两个平台都未处理. 如果处理的话, 监听页面visibilitychange等事件接触定时器即可. \")]), _vm._v(\" \"), _c('h5', [_vm._v(\"示例\")]), _vm._v(\" \"), _c('p', [_vm._v(\"知乎: JS判断APP是否安装?\")]), _vm._v(\" \"), _c('Grid', {\n    attrs: {\n      \"no-padding\": \"\"\n    }\n  }, [_c('Row', [_c('Column', [_c('Button', {\n    attrs: {\n      \"small\": \"\",\n      \"outline\": \"\"\n    },\n    on: {\n      \"click\": _vm.viewInZhihuApp\n    }\n  }, [_vm._v(\"在知乎App中浏览\")])], 1)], 1)], 1), _vm._v(\" \"), _c('p', [_vm._v(\"网易新闻: 刘强东力挺顺丰：我相信王卫为人，质疑菜鸟违法\")]), _vm._v(\" \"), _c('Grid', {\n    attrs: {\n      \"no-padding\": \"\"\n    }\n  }, [_c('Row', [_c('Column', [_c('Button', {\n    attrs: {\n      \"small\": \"\",\n      \"outline\": \"\"\n    },\n    on: {\n      \"click\": _vm.viewInNetEaseApp\n    }\n  }, [_vm._v(\"在网易新闻中浏览\")])], 1)], 1)], 1)], 1)], 1)\n},staticRenderFns: []}\n\n/***/ }),\n\n/***/ 1335:\n/***/ (function(module, exports, __webpack_require__) {\n\n\n/* styles */\n__webpack_require__(1161)\n\nvar Component = __webpack_require__(1)(\n  /* script */\n  __webpack_require__(1163),\n  /* template */\n  __webpack_require__(1165),\n  /* scopeId */\n  \"data-v-12c51c8f\",\n  /* cssModules */\n  null\n)\n\nmodule.exports = Component.exports\n\n\n/***/ })\n\n});\n\n\n// WEBPACK FOOTER //\n// static/js/19.da67e379e4a119ff9e2b.js","// style-loader: Adds some css to the DOM by adding a <style> tag\n\n// load the styles\nvar content = require(\"!!../../../../node_modules/css-loader/index.js?{\\\"minimize\\\":true,\\\"sourceMap\\\":true}!../../../../node_modules/vue-loader/lib/style-compiler/index.js?{\\\"id\\\":\\\"data-v-12c51c8f\\\",\\\"scoped\\\":true,\\\"hasInlineConfig\\\":false}!../../../../node_modules/sass-loader/lib/loader.js?{\\\"data\\\":\\\"@charset \\\\\\\"UTF-8\\\\\\\"; @import \\\\\\\"/home/travis/build/vm-component/vimo/examples/src/theme/variables.scss\\\\\\\";\\\",\\\"sourceMap\\\":true}!../../../../node_modules/vue-loader/lib/selector.js?type=styles&index=0!./deeplink.vue\");\nif(typeof content === 'string') content = [[module.id, content, '']];\nif(content.locals) module.exports = content.locals;\n// add the styles to the DOM\nvar update = require(\"!../../../../node_modules/vue-style-loader/lib/addStylesClient.js\")(\"ffe0ae26\", content, true);\n\n\n// WEBPACK FOOTER //\n// ./node_modules/extract-text-webpack-plugin/dist/\"}!./node_modules/vue-style-loader!./node_modules/css-loader?{\"minimize\":true,\"sourceMap\":true}!./node_modules/vue-loader/lib/style-compiler?{\"id\":\"data-v-12c51c8f\",\"scoped\":true,\"hasInlineConfig\":false}!./node_modules/sass-loader/lib/loader.js?{\"data\":\"@charset /\"UTF-8/\"; @import /\"/home/travis/build/vm-component/vimo/examples/src/theme/variables.scss/\";\",\"sourceMap\":true}!./node_modules/vue-loader/lib/selector.js?type=styles&index=0!./examples/src/pages/deeplink/deeplink.vue","exports = module.exports = require(\"../../../../node_modules/css-loader/lib/css-base.js\")();\n// imports\n\n\n// module\nexports.push([module.id, \"\", \"\", {\"version\":3,\"sources\":[],\"names\":[],\"mappings\":\"\",\"file\":\"deeplink.vue\",\"sourceRoot\":\"\"}]);\n\n// exports\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/css-loader?{\"minimize\":true,\"sourceMap\":true}!./node_modules/vue-loader/lib/style-compiler?{\"id\":\"data-v-12c51c8f\",\"scoped\":true,\"hasInlineConfig\":false}!./node_modules/sass-loader/lib/loader.js?{\"data\":\"@charset /\"UTF-8/\"; @import /\"/home/travis/build/vm-component/vimo/examples/src/theme/variables.scss/\";\",\"sourceMap\":true}!./node_modules/vue-loader/lib/selector.js?type=styles&index=0!./examples/src/pages/deeplink/deeplink.vue\n// module id = 1162\n// module chunks = 19","<template>\n    <Page>\n        <Header>\n            <Navbar>\n                <Title>Deeplink</Title>\n            </Navbar>\n        </Header>\n        <Content padding class=\"outer-content\">\n            <h5>简介</h5>\n\n            <p>Deeplink用于跳转到原生App的方法, 如果安装了App则启动app并跳转, 如果没安装app则进入下载页面. 我这里只安装了知乎和网易新闻, 没安装Twitter. </p>\n\n            <h5>原理</h5>\n            <p>\n                目前主流的H5跳转APP(知乎/网易新闻)都是使用的window.location.href进行的. 在IOS中使用Universal Links, 在Android中使用URL Scheme方案. 且Universal Links指向的页面都为下载引导页.</p>\n            <p>此外, IOS的跳转很流畅, 但是Android的实现相对不太好. 因为会出现下载链接的提示. 通过设置setTimeout的解决方式不能完全解决问题, 故上面两个平台都未处理. 如果处理的话, 监听页面visibilitychange等事件接触定时器即可. </p>\n\n            <h5>示例</h5>\n            <p>知乎: JS判断APP是否安装?</p>\n            <Grid no-padding>\n                <Row>\n                    <Column>\n                        <Button small outline @click=\"viewInZhihuApp\">在知乎App中浏览</Button>\n                    </Column>\n                </Row>\n            </Grid>\n\n            <p>网易新闻: 刘强东力挺顺丰：我相信王卫为人，质疑菜鸟违法</p>\n            <Grid no-padding>\n                <Row>\n                    <Column>\n                        <Button small outline @click=\"viewInNetEaseApp\">在网易新闻中浏览</Button>\n                    </Column>\n                </Row>\n            </Grid>\n        </Content>\n    </Page>\n</template>\n<style scoped lang=\"scss\">\n\n</style>\n<script type=\"text/javascript\">\n  import './visibly'\n  export default{\n    name: 'name',\n    data () {\n      return {\n        timer: null\n      }\n    },\n    methods: {\n      viewInZhihuApp () {\n        this.toAppOrDownload({\n          urlScheme: 'zhihu://questions/34831949?utm_campaign=ge19&utm_content=m_banner',\n          universalLinks: 'https://oia.zhihu.com/questions/34831949?utm_campaign=ge19'\n        })\n      },\n      viewInNetEaseApp () {\n        this.toAppOrDownload({\n          urlScheme: 'newsapp://doc/CLU0M6DS00097U7R?s=sps_ulink&ss=sps_article',\n          universalLinks: 'http://m.163.com/newsapp/applinks.html?path=%2Fdoc%2FCLU0M6DS00097U7R&s=sps_ulink&ss=sps_article'\n        })\n      },\n\n      /**\n       * 跳转到app或者下载\n       * 尝试进入app, 如果超时(1000)则进入下载引导页, 在下载引导页中操作下载还是在外部浏览器中打开\n       * */\n      toAppOrDownload (options) {\n        if (this.$platform.is('android') || (this.$platform.is('ios') && this.$platform.version().major < 9)) {\n          window.location.href = options.urlScheme\n          this.timer = window.setTimeout(() => {\n            window.location.href = options.universalLinks\n          }, 1000)\n\n          // 如果跳转了则清除setTimeout\n          window.visibly.onHidden(() => {\n            window.clearTimeout(this.timer)\n          })\n        } else {\n          window.location.href = options.universalLinks\n        }\n      }\n    },\n    created () {\n    },\n    mounted () {\n    },\n    props: {},\n    watch: {},\n    computed: {},\n    activated () {},\n    deactivate () {},\n    components: {},\n    destroyed () {}\n  }\n</script>\n\n\n\n// WEBPACK FOOTER //\n// deeplink.vue?78ff40f5","/*!\n * visibly - v0.7 Page Visibility API Polyfill\n * http://github.com/addyosmani\n * Copyright (c) 2011-2014 Addy Osmani\n * Dual licensed under the MIT and GPL licenses.\n *\n * Methods supported:\n * visibly.onVisible(callback)\n * visibly.onHidden(callback)\n * visibly.hidden()\n * visibly.visibilityState()\n * visibly.visibilitychange(callback(state));\n */\n\n;(function () {\n  window.visibly = {\n    q: document,\n    p: undefined,\n    prefixes: ['webkit', 'ms', 'o', 'moz', 'khtml'],\n    props: ['VisibilityState', 'visibilitychange', 'Hidden'],\n    m: ['focus', 'blur'],\n    visibleCallbacks: [],\n    hiddenCallbacks: [],\n    genericCallbacks: [],\n    _callbacks: [],\n    cachedPrefix: '',\n    fn: null,\n\n    onVisible: function (_callback) {\n      if (typeof _callback === 'function') {\n        this.visibleCallbacks.push(_callback)\n      }\n    },\n    onHidden: function (_callback) {\n      if (typeof _callback === 'function') {\n        this.hiddenCallbacks.push(_callback)\n      }\n    },\n    getPrefix: function () {\n      if (!this.cachedPrefix) {\n        // eslint-disable-next-line no-cond-assign\n        for (var l = 0, b; b = this.prefixes[l++];) {\n          if (b + this.props[2] in this.q) {\n            this.cachedPrefix = b\n            return this.cachedPrefix\n          }\n        }\n      }\n    },\n\n    visibilityState: function () {\n      return this._getProp(0)\n    },\n    hidden: function () {\n      return this._getProp(2)\n    },\n    visibilitychange: function (fn) {\n      if (typeof fn === 'function') {\n        this.genericCallbacks.push(fn)\n      }\n\n      var n = this.genericCallbacks.length\n      if (n) {\n        if (this.cachedPrefix) {\n          while (n--) {\n            this.genericCallbacks[n].call(this, this.visibilityState())\n          }\n        } else {\n          while (n--) {\n            this.genericCallbacks[n].call(this, arguments[0])\n          }\n        }\n      }\n    },\n    isSupported: function (index) {\n      return ((this._getPropName(2)) in this.q)\n    },\n    _getPropName: function (index) {\n      return (this.cachedPrefix === '' ? this.props[index].substring(0, 1).toLowerCase() + this.props[index].substring(1) : this.cachedPrefix + this.props[index])\n    },\n    _getProp: function (index) {\n      return this.q[this._getPropName(index)]\n    },\n    _execute: function (index) {\n      if (index) {\n        this._callbacks = (index === 1) ? this.visibleCallbacks : this.hiddenCallbacks\n        var n = this._callbacks.length\n        while (n--) {\n          this._callbacks[n]()\n        }\n      }\n    },\n    _visible: function () {\n      window.visibly._execute(1)\n      // eslint-disable-next-line no-useless-call\n      window.visibly.visibilitychange.call(window.visibly, 'visible')\n    },\n    _hidden: function () {\n      window.visibly._execute(2)\n      // eslint-disable-next-line no-useless-call\n      window.visibly.visibilitychange.call(window.visibly, 'hidden')\n    },\n    _nativeSwitch: function () {\n      this[this._getProp(2) ? '_hidden' : '_visible']()\n    },\n    _listen: function () {\n      try { /* if no native page visibility support found.. */\n        if (!(this.isSupported())) {\n          if (this.q.addEventListener) { /* for browsers without focusin/out support eg. firefox, opera use focus/blur */\n            window.addEventListener(this.m[0], this._visible, 1)\n            window.addEventListener(this.m[1], this._hidden, 1)\n          } else { /* IE <10s most reliable focus events are onfocusin/onfocusout */\n            if (this.q.attachEvent) {\n              this.q.attachEvent('onfocusin', this._visible)\n              this.q.attachEvent('onfocusout', this._hidden)\n            }\n          }\n        } else { /* switch support based on prefix detected earlier */\n          this.q.addEventListener(this._getPropName(1), function () {\n            window.visibly._nativeSwitch.apply(window.visibly, arguments)\n          }, 1)\n        }\n      } catch (e) {}\n    },\n    init: function () {\n      this.getPrefix()\n      this._listen()\n    }\n  }\n\n  window.visibly.init()\n})()\n\n\n// WEBPACK FOOTER //\n// ./examples/src/pages/deeplink/visibly.js","module.exports={render:function (){var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;\n  return _c('Page', [_c('Header', [_c('Navbar', [_c('Title', [_vm._v(\"Deeplink\")])], 1)], 1), _vm._v(\" \"), _c('Content', {\n    staticClass: \"outer-content\",\n    attrs: {\n      \"padding\": \"\"\n    }\n  }, [_c('h5', [_vm._v(\"简介\")]), _vm._v(\" \"), _c('p', [_vm._v(\"Deeplink用于跳转到原生App的方法, 如果安装了App则启动app并跳转, 如果没安装app则进入下载页面. 我这里只安装了知乎和网易新闻, 没安装Twitter. \")]), _vm._v(\" \"), _c('h5', [_vm._v(\"原理\")]), _vm._v(\" \"), _c('p', [_vm._v(\"\\n            目前主流的H5跳转APP(知乎/网易新闻)都是使用的window.location.href进行的. 在IOS中使用Universal Links, 在Android中使用URL Scheme方案. 且Universal Links指向的页面都为下载引导页.\")]), _vm._v(\" \"), _c('p', [_vm._v(\"此外, IOS的跳转很流畅, 但是Android的实现相对不太好. 因为会出现下载链接的提示. 通过设置setTimeout的解决方式不能完全解决问题, 故上面两个平台都未处理. 如果处理的话, 监听页面visibilitychange等事件接触定时器即可. \")]), _vm._v(\" \"), _c('h5', [_vm._v(\"示例\")]), _vm._v(\" \"), _c('p', [_vm._v(\"知乎: JS判断APP是否安装?\")]), _vm._v(\" \"), _c('Grid', {\n    attrs: {\n      \"no-padding\": \"\"\n    }\n  }, [_c('Row', [_c('Column', [_c('Button', {\n    attrs: {\n      \"small\": \"\",\n      \"outline\": \"\"\n    },\n    on: {\n      \"click\": _vm.viewInZhihuApp\n    }\n  }, [_vm._v(\"在知乎App中浏览\")])], 1)], 1)], 1), _vm._v(\" \"), _c('p', [_vm._v(\"网易新闻: 刘强东力挺顺丰：我相信王卫为人，质疑菜鸟违法\")]), _vm._v(\" \"), _c('Grid', {\n    attrs: {\n      \"no-padding\": \"\"\n    }\n  }, [_c('Row', [_c('Column', [_c('Button', {\n    attrs: {\n      \"small\": \"\",\n      \"outline\": \"\"\n    },\n    on: {\n      \"click\": _vm.viewInNetEaseApp\n    }\n  }, [_vm._v(\"在网易新闻中浏览\")])], 1)], 1)], 1)], 1)], 1)\n},staticRenderFns: []}\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/vue-loader/lib/template-compiler?{\"id\":\"data-v-12c51c8f\"}!./node_modules/vue-loader/lib/selector.js?type=template&index=0!./examples/src/pages/deeplink/deeplink.vue\n// module id = 1165\n// module chunks = 19","\n/* styles */\nrequire(\"!!../../../../node_modules/extract-text-webpack-plugin/dist/loader.js?{\\\"omit\\\":1,\\\"remove\\\":true,\\\"publicPath\\\":\\\"../../\\\"}!vue-style-loader!css-loader?{\\\"minimize\\\":true,\\\"sourceMap\\\":true}!../../../../node_modules/vue-loader/lib/style-compiler/index?{\\\"id\\\":\\\"data-v-12c51c8f\\\",\\\"scoped\\\":true,\\\"hasInlineConfig\\\":false}!sass-loader?{\\\"data\\\":\\\"@charset \\\\\\\"UTF-8\\\\\\\"; @import \\\\\\\"/home/travis/build/vm-component/vimo/examples/src/theme/variables.scss\\\\\\\";\\\",\\\"sourceMap\\\":true}!../../../../node_modules/vue-loader/lib/selector?type=styles&index=0!./deeplink.vue\")\n\nvar Component = require(\"!../../../../node_modules/vue-loader/lib/component-normalizer\")(\n  /* script */\n  require(\"!!babel-loader!../../../../node_modules/vue-loader/lib/selector?type=script&index=0!./deeplink.vue\"),\n  /* template */\n  require(\"!!../../../../node_modules/vue-loader/lib/template-compiler/index?{\\\"id\\\":\\\"data-v-12c51c8f\\\"}!../../../../node_modules/vue-loader/lib/selector?type=template&index=0!./deeplink.vue\"),\n  /* scopeId */\n  \"data-v-12c51c8f\",\n  /* cssModules */\n  null\n)\n\nmodule.exports = Component.exports\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./examples/src/pages/deeplink/deeplink.vue\n// module id = 1335\n// module chunks = 19"],"sourceRoot":""}