{"version":3,"sources":["webpack:///static/js/63.90ae799d59e86521c222.js","webpack:///./src/example/deeplink/deeplink.vue?9042","webpack:///deeplink.vue","webpack:///./src/example/deeplink/visibly.js","webpack:///./src/example/deeplink/deeplink.vue","webpack:///./src/example/deeplink/deeplink.vue?571f","webpack:///./src/example/deeplink/deeplink.vue?4d73"],"names":["webpackJsonp","1022","module","exports","__webpack_require__","content","i","locals","1072","Object","defineProperty","value","default","name","data","timer","methods","viewInZhihuApp","this","toAppOrDownload","urlScheme","universalLinks","viewInNetEaseApp","options","_this","$platform","is","version","major","window","location","href","setTimeout","visibly","onHidden","clearTimeout","created","mounted","props","watch","computed","activated","deactivate","components","destroyed","1170","q","document","p","undefined","prefixes","m","visibleCallbacks","hiddenCallbacks","genericCallbacks","_callbacks","cachedPrefix","fn","onVisible","_callback","push","getPrefix","b","l","visibilityState","_getProp","hidden","visibilitychange","n","length","call","arguments","isSupported","index","_getPropName","substring","toLowerCase","_execute","_visible","_hidden","_nativeSwitch","_listen","addEventListener","apply","attachEvent","e","init","439","Component","740","sources","names","mappings","file","sourceRoot","903","render","_vm","_h","$createElement","_c","_self","_v","staticClass","attrs","padding","no-padding","small","outline","on","click","staticRenderFns"],"mappings":"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","file":"static/js/63.90ae799d59e86521c222.js","sourcesContent":["webpackJsonp([63],{\n\n/***/ 1022:\n/***/ (function(module, exports, __webpack_require__) {\n\n// style-loader: Adds some css to the DOM by adding a <style> tag\n\n// load the styles\nvar content = __webpack_require__(740);\nif(typeof content === 'string') content = [[module.i, content, '']];\nif(content.locals) module.exports = content.locals;\n// add the styles to the DOM\nvar update = __webpack_require__(415)(\"6fcb269e\", content, true);\n\n/***/ }),\n\n/***/ 1072:\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\n\n__webpack_require__(1170);\n\nexports.default = {\n  name: 'name',\n  data: function data() {\n    return {\n      timer: null\n    };\n  },\n\n  methods: {\n    viewInZhihuApp: function viewInZhihuApp() {\n      this.toAppOrDownload({\n        urlScheme: 'zhihu://questions/34831949?utm_campaign=ge19&utm_content=m_banner',\n        universalLinks: 'https://oia.zhihu.com/questions/34831949?utm_campaign=ge19'\n      });\n    },\n    viewInNetEaseApp: function viewInNetEaseApp() {\n      this.toAppOrDownload({\n        urlScheme: 'newsapp://doc/CLU0M6DS00097U7R?s=sps_ulink&ss=sps_article',\n        universalLinks: 'http://m.163.com/newsapp/applinks.html?path=%2Fdoc%2FCLU0M6DS00097U7R&s=sps_ulink&ss=sps_article'\n      });\n    },\n    toAppOrDownload: function toAppOrDownload(options) {\n      var _this = this;\n\n      if (this.$platform.is('android') || this.$platform.is('ios') && this.$platform.version().major < 9) {\n        window.location.href = options.urlScheme;\n        this.timer = window.setTimeout(function () {\n          window.location.href = options.universalLinks;\n        }, 1000);\n\n        window.visibly.onHidden(function () {\n          window.clearTimeout(_this.timer);\n        });\n      } else {\n        window.location.href = options.universalLinks;\n      }\n    }\n  },\n  created: function created() {},\n  mounted: function mounted() {},\n\n  props: {},\n  watch: {},\n  computed: {},\n  activated: function activated() {},\n  deactivate: function deactivate() {},\n\n  components: {},\n  destroyed: function destroyed() {}\n};\n\n/***/ }),\n\n/***/ 1170:\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\n\n;(function () {\n\n  window.visibly = {\n    q: document,\n    p: undefined,\n    prefixes: ['webkit', 'ms', 'o', 'moz', 'khtml'],\n    props: ['VisibilityState', 'visibilitychange', 'Hidden'],\n    m: ['focus', 'blur'],\n    visibleCallbacks: [],\n    hiddenCallbacks: [],\n    genericCallbacks: [],\n    _callbacks: [],\n    cachedPrefix: \"\",\n    fn: null,\n\n    onVisible: function onVisible(_callback) {\n      if (typeof _callback == 'function') {\n        this.visibleCallbacks.push(_callback);\n      }\n    },\n    onHidden: function onHidden(_callback) {\n      if (typeof _callback == 'function') {\n        this.hiddenCallbacks.push(_callback);\n      }\n    },\n    getPrefix: function getPrefix() {\n      if (!this.cachedPrefix) {\n        for (var l = 0, b; b = this.prefixes[l++];) {\n          if (b + this.props[2] in this.q) {\n            this.cachedPrefix = b;\n            return this.cachedPrefix;\n          }\n        }\n      }\n    },\n\n    visibilityState: function visibilityState() {\n      return this._getProp(0);\n    },\n    hidden: function hidden() {\n      return this._getProp(2);\n    },\n    visibilitychange: function visibilitychange(fn) {\n      if (typeof fn == 'function') {\n        this.genericCallbacks.push(fn);\n      }\n\n      var n = this.genericCallbacks.length;\n      if (n) {\n        if (this.cachedPrefix) {\n          while (n--) {\n            this.genericCallbacks[n].call(this, this.visibilityState());\n          }\n        } else {\n          while (n--) {\n            this.genericCallbacks[n].call(this, arguments[0]);\n          }\n        }\n      }\n    },\n    isSupported: function isSupported(index) {\n      return this._getPropName(2) in this.q;\n    },\n    _getPropName: function _getPropName(index) {\n      return this.cachedPrefix == \"\" ? this.props[index].substring(0, 1).toLowerCase() + this.props[index].substring(1) : this.cachedPrefix + this.props[index];\n    },\n    _getProp: function _getProp(index) {\n      return this.q[this._getPropName(index)];\n    },\n    _execute: function _execute(index) {\n      if (index) {\n        this._callbacks = index == 1 ? this.visibleCallbacks : this.hiddenCallbacks;\n        var n = this._callbacks.length;\n        while (n--) {\n          this._callbacks[n]();\n        }\n      }\n    },\n    _visible: function _visible() {\n      window.visibly._execute(1);\n      window.visibly.visibilitychange.call(window.visibly, 'visible');\n    },\n    _hidden: function _hidden() {\n      window.visibly._execute(2);\n      window.visibly.visibilitychange.call(window.visibly, 'hidden');\n    },\n    _nativeSwitch: function _nativeSwitch() {\n      this[this._getProp(2) ? '_hidden' : '_visible']();\n    },\n    _listen: function _listen() {\n      try {\n        if (!this.isSupported()) {\n          if (this.q.addEventListener) {\n            window.addEventListener(this.m[0], this._visible, 1);\n            window.addEventListener(this.m[1], this._hidden, 1);\n          } else {\n            if (this.q.attachEvent) {\n              this.q.attachEvent('onfocusin', this._visible);\n              this.q.attachEvent('onfocusout', this._hidden);\n            }\n          }\n        } else {\n          this.q.addEventListener(this._getPropName(1), function () {\n            window.visibly._nativeSwitch.apply(window.visibly, arguments);\n          }, 1);\n        }\n      } catch (e) {}\n    },\n    init: function init() {\n      this.getPrefix();\n      this._listen();\n    }\n  };\n\n  window.visibly.init();\n})();\n\n/***/ }),\n\n/***/ 439:\n/***/ (function(module, exports, __webpack_require__) {\n\n\n/* styles */\n__webpack_require__(1022)\n\nvar Component = __webpack_require__(0)(\n  /* script */\n  __webpack_require__(1072),\n  /* template */\n  __webpack_require__(903),\n  /* scopeId */\n  \"data-v-f94440f2\",\n  /* cssModules */\n  null\n)\n\nmodule.exports = Component.exports\n\n\n/***/ }),\n\n/***/ 740:\n/***/ (function(module, exports, __webpack_require__) {\n\nexports = module.exports = __webpack_require__(414)();\n// imports\n\n\n// module\nexports.push([module.i, \"\", \"\", {\"version\":3,\"sources\":[],\"names\":[],\"mappings\":\"\",\"file\":\"deeplink.vue\",\"sourceRoot\":\"\"}]);\n\n// exports\n\n\n/***/ }),\n\n/***/ 903:\n/***/ (function(module, exports) {\n\nmodule.exports={render:function (){var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;\n  return _c('Page', [_c('Header', [_c('Navbar', [_c('Title', [_vm._v(\"Deeplink\")])], 1)], 1), _vm._v(\" \"), _c('Content', {\n    staticClass: \"outer-content\",\n    attrs: {\n      \"padding\": \"\"\n    }\n  }, [_c('h5', [_vm._v(\"简介\")]), _vm._v(\" \"), _c('p', [_vm._v(\"Deeplink用于跳转到原生App的方法, 如果安装了App则启动app并跳转, 如果没安装app则进入下载页面. 我这里只安装了知乎和网易新闻, 没安装Twitter. \")]), _vm._v(\" \"), _c('h5', [_vm._v(\"原理\")]), _vm._v(\" \"), _c('p', [_vm._v(\"\\n            目前主流的H5跳转APP(知乎/网易新闻)都是使用的window.location.href进行的. 在IOS中使用Universal Links, 在Android中使用URL Scheme方案. 且Universal Links指向的页面都为下载引导页.\")]), _vm._v(\" \"), _c('p', [_vm._v(\"此外, IOS的跳转很流畅, 但是Android的实现相对不太好. 因为会出现下载链接的提示. 通过设置setTimeout的解决方式不能完全解决问题, 故上面两个平台都未处理. 如果处理的话, 监听页面visibilitychange等事件接触定时器即可. \")]), _vm._v(\" \"), _c('h5', [_vm._v(\"示例\")]), _vm._v(\" \"), _c('p', [_vm._v(\"知乎: JS判断APP是否安装?\")]), _vm._v(\" \"), _c('Grid', {\n    attrs: {\n      \"no-padding\": \"\"\n    }\n  }, [_c('Row', [_c('Column', [_c('Button', {\n    attrs: {\n      \"small\": \"\",\n      \"outline\": \"\"\n    },\n    on: {\n      \"click\": _vm.viewInZhihuApp\n    }\n  }, [_vm._v(\"在知乎App中浏览\")])], 1)], 1)], 1), _vm._v(\" \"), _c('p', [_vm._v(\"网易新闻: 刘强东力挺顺丰：我相信王卫为人，质疑菜鸟违法\")]), _vm._v(\" \"), _c('Grid', {\n    attrs: {\n      \"no-padding\": \"\"\n    }\n  }, [_c('Row', [_c('Column', [_c('Button', {\n    attrs: {\n      \"small\": \"\",\n      \"outline\": \"\"\n    },\n    on: {\n      \"click\": _vm.viewInNetEaseApp\n    }\n  }, [_vm._v(\"在网易新闻中浏览\")])], 1)], 1)], 1)], 1)], 1)\n},staticRenderFns: []}\n\n/***/ })\n\n});\n\n\n// WEBPACK FOOTER //\n// static/js/63.90ae799d59e86521c222.js","// style-loader: Adds some css to the DOM by adding a <style> tag\n\n// load the styles\nvar content = require(\"!!../../../node_modules/.0.26.4@css-loader/index.js?{\\\"minimize\\\":true,\\\"sourceMap\\\":true}!../../../node_modules/.11.3.4@vue-loader/lib/style-compiler/index.js?{\\\"id\\\":\\\"data-v-f94440f2\\\",\\\"scoped\\\":true,\\\"hasInlineConfig\\\":false}!../../../node_modules/.6.0.3@sass-loader/lib/loader.js?{\\\"sourceMap\\\":true}!../../../node_modules/.11.3.4@vue-loader/lib/selector.js?type=styles&index=0!./deeplink.vue\");\nif(typeof content === 'string') content = [[module.id, content, '']];\nif(content.locals) module.exports = content.locals;\n// add the styles to the DOM\nvar update = require(\"!../../../node_modules/.2.0.5@vue-style-loader/lib/addStylesClient.js\")(\"6fcb269e\", content, true);\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./~/.2.1.0@extract-text-webpack-plugin/loader.js?{\"omit\":1,\"remove\":true}!./~/.2.0.5@vue-style-loader!./~/.0.26.4@css-loader?{\"minimize\":true,\"sourceMap\":true}!./~/.11.3.4@vue-loader/lib/style-compiler?{\"id\":\"data-v-f94440f2\",\"scoped\":true,\"hasInlineConfig\":false}!./~/.6.0.3@sass-loader/lib/loader.js?{\"sourceMap\":true}!./~/.11.3.4@vue-loader/lib/selector.js?type=styles&index=0!./src/example/deeplink/deeplink.vue\n// module id = 1022\n// module chunks = 63","<template>\n    <Page>\n        <Header>\n            <Navbar>\n                <Title>Deeplink</Title>\n            </Navbar>\n        </Header>\n        <Content padding class=\"outer-content\">\n            <h5>简介</h5>\n\n            <p>Deeplink用于跳转到原生App的方法, 如果安装了App则启动app并跳转, 如果没安装app则进入下载页面. 我这里只安装了知乎和网易新闻, 没安装Twitter. </p>\n\n            <h5>原理</h5>\n            <p>\n                目前主流的H5跳转APP(知乎/网易新闻)都是使用的window.location.href进行的. 在IOS中使用Universal Links, 在Android中使用URL Scheme方案. 且Universal Links指向的页面都为下载引导页.</p>\n            <p>此外, IOS的跳转很流畅, 但是Android的实现相对不太好. 因为会出现下载链接的提示. 通过设置setTimeout的解决方式不能完全解决问题, 故上面两个平台都未处理. 如果处理的话, 监听页面visibilitychange等事件接触定时器即可. </p>\n\n            <h5>示例</h5>\n            <p>知乎: JS判断APP是否安装?</p>\n            <Grid no-padding>\n                <Row>\n                    <Column>\n                        <Button small outline @click=\"viewInZhihuApp\">在知乎App中浏览</Button>\n                    </Column>\n                </Row>\n            </Grid>\n\n            <p>网易新闻: 刘强东力挺顺丰：我相信王卫为人，质疑菜鸟违法</p>\n            <Grid no-padding>\n                <Row>\n                    <Column>\n                        <Button small outline @click=\"viewInNetEaseApp\">在网易新闻中浏览</Button>\n                    </Column>\n                </Row>\n            </Grid>\n        </Content>\n    </Page>\n</template>\n<style scoped lang=\"scss\">\n\n</style>\n<script type=\"text/javascript\">\n  import './visibly'\n  export default{\n    name: 'name',\n    data () {\n      return {\n        timer: null\n      }\n    },\n    methods: {\n      viewInZhihuApp () {\n        this.toAppOrDownload({\n          urlScheme: 'zhihu://questions/34831949?utm_campaign=ge19&utm_content=m_banner',\n          universalLinks: 'https://oia.zhihu.com/questions/34831949?utm_campaign=ge19'\n        })\n      },\n      viewInNetEaseApp () {\n        this.toAppOrDownload({\n          urlScheme: 'newsapp://doc/CLU0M6DS00097U7R?s=sps_ulink&ss=sps_article',\n          universalLinks: 'http://m.163.com/newsapp/applinks.html?path=%2Fdoc%2FCLU0M6DS00097U7R&s=sps_ulink&ss=sps_article'\n        })\n      },\n\n      /**\n       * 跳转到app或者下载\n       * 尝试进入app, 如果超时(1000)则进入下载引导页, 在下载引导页中操作下载还是在外部浏览器中打开\n       * */\n      toAppOrDownload (options) {\n        if (this.$platform.is('android') || (this.$platform.is('ios') && this.$platform.version().major < 9)) {\n          window.location.href = options.urlScheme\n          this.timer = window.setTimeout(() => {\n            window.location.href = options.universalLinks\n          }, 1000)\n\n          // 如果跳转了则清除setTimeout\n          window.visibly.onHidden(() => {\n            window.clearTimeout(this.timer)\n          })\n        } else {\n          window.location.href = options.universalLinks\n        }\n      }\n    },\n    created () {\n    },\n    mounted () {\n    },\n    props: {},\n    watch: {},\n    computed: {},\n    activated () {},\n    deactivate () {},\n    components: {},\n    destroyed () {}\n  }\n</script>\n\n\n\n// WEBPACK FOOTER //\n// deeplink.vue?78ff40f5","/*!\n * visibly - v0.7 Page Visibility API Polyfill\n * http://github.com/addyosmani\n * Copyright (c) 2011-2014 Addy Osmani\n * Dual licensed under the MIT and GPL licenses.\n *\n * Methods supported:\n * visibly.onVisible(callback)\n * visibly.onHidden(callback)\n * visibly.hidden()\n * visibly.visibilityState()\n * visibly.visibilitychange(callback(state));\n */\n\n;(function () {\n\n  window.visibly = {\n    q: document,\n    p: undefined,\n    prefixes: ['webkit', 'ms','o','moz','khtml'],\n    props: ['VisibilityState', 'visibilitychange', 'Hidden'],\n    m: ['focus', 'blur'],\n    visibleCallbacks: [],\n    hiddenCallbacks: [],\n    genericCallbacks:[],\n    _callbacks: [],\n    cachedPrefix:\"\",\n    fn:null,\n\n    onVisible: function (_callback) {\n      if(typeof _callback == 'function' ){\n        this.visibleCallbacks.push(_callback);\n      }\n    },\n    onHidden: function (_callback) {\n      if(typeof _callback == 'function' ){\n        this.hiddenCallbacks.push(_callback);\n      }\n    },\n    getPrefix:function(){\n      if(!this.cachedPrefix){\n        for(var l=0,b;b=this.prefixes[l++];){\n          if(b + this.props[2] in this.q){\n            this.cachedPrefix =  b;\n            return this.cachedPrefix;\n          }\n        }\n      }\n    },\n\n    visibilityState:function(){\n      return  this._getProp(0);\n    },\n    hidden:function(){\n      return this._getProp(2);\n    },\n    visibilitychange:function(fn){\n      if(typeof fn == 'function' ){\n        this.genericCallbacks.push(fn);\n      }\n\n      var n =  this.genericCallbacks.length;\n      if(n){\n        if(this.cachedPrefix){\n          while(n--){\n            this.genericCallbacks[n].call(this, this.visibilityState());\n          }\n        }else{\n          while(n--){\n            this.genericCallbacks[n].call(this, arguments[0]);\n          }\n        }\n      }\n\n    },\n    isSupported: function (index) {\n      return ((this._getPropName(2)) in this.q);\n    },\n    _getPropName:function(index) {\n      return (this.cachedPrefix == \"\" ? this.props[index].substring(0, 1).toLowerCase() + this.props[index].substring(1) : this.cachedPrefix + this.props[index]);\n    },\n    _getProp:function(index){\n      return this.q[this._getPropName(index)];\n    },\n    _execute: function (index) {\n      if (index) {\n        this._callbacks = (index == 1) ? this.visibleCallbacks : this.hiddenCallbacks;\n        var n =  this._callbacks.length;\n        while(n--){\n          this._callbacks[n]();\n        }\n      }\n    },\n    _visible: function () {\n      window.visibly._execute(1);\n      window.visibly.visibilitychange.call(window.visibly, 'visible');\n    },\n    _hidden: function () {\n      window.visibly._execute(2);\n      window.visibly.visibilitychange.call(window.visibly, 'hidden');\n    },\n    _nativeSwitch: function () {\n      this[this._getProp(2) ? '_hidden' : '_visible']();\n    },\n    _listen: function () {\n      try { /*if no native page visibility support found..*/\n        if (!(this.isSupported())) {\n          if (this.q.addEventListener) { /*for browsers without focusin/out support eg. firefox, opera use focus/blur*/\n            window.addEventListener(this.m[0], this._visible, 1);\n            window.addEventListener(this.m[1], this._hidden, 1);\n          } else { /*IE <10s most reliable focus events are onfocusin/onfocusout*/\n            if (this.q.attachEvent) {\n              this.q.attachEvent('onfocusin', this._visible);\n              this.q.attachEvent('onfocusout', this._hidden);\n            }\n          }\n        } else { /*switch support based on prefix detected earlier*/\n          this.q.addEventListener(this._getPropName(1), function () {\n            window.visibly._nativeSwitch.apply(window.visibly, arguments);\n          }, 1);\n        }\n      } catch (e) {}\n    },\n    init: function () {\n      this.getPrefix();\n      this._listen();\n    }\n  };\n\n  window.visibly.init();\n})();\n\n\n// WEBPACK FOOTER //\n// ./src/example/deeplink/visibly.js","\n/* styles */\nrequire(\"!!../../../node_modules/.2.1.0@extract-text-webpack-plugin/loader.js?{\\\"omit\\\":1,\\\"remove\\\":true}!vue-style-loader!css-loader?{\\\"minimize\\\":true,\\\"sourceMap\\\":true}!../../../node_modules/.11.3.4@vue-loader/lib/style-compiler/index?{\\\"id\\\":\\\"data-v-f94440f2\\\",\\\"scoped\\\":true,\\\"hasInlineConfig\\\":false}!sass-loader?{\\\"sourceMap\\\":true}!../../../node_modules/.11.3.4@vue-loader/lib/selector?type=styles&index=0!./deeplink.vue\")\n\nvar Component = require(\"!../../../node_modules/.11.3.4@vue-loader/lib/component-normalizer\")(\n  /* script */\n  require(\"!!babel-loader!../../../node_modules/.11.3.4@vue-loader/lib/selector?type=script&index=0!./deeplink.vue\"),\n  /* template */\n  require(\"!!../../../node_modules/.11.3.4@vue-loader/lib/template-compiler/index?{\\\"id\\\":\\\"data-v-f94440f2\\\"}!../../../node_modules/.11.3.4@vue-loader/lib/selector?type=template&index=0!./deeplink.vue\"),\n  /* scopeId */\n  \"data-v-f94440f2\",\n  /* cssModules */\n  null\n)\n\nmodule.exports = Component.exports\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/example/deeplink/deeplink.vue\n// module id = 439\n// module chunks = 63","exports = module.exports = require(\"../../../node_modules/.0.26.4@css-loader/lib/css-base.js\")();\n// imports\n\n\n// module\nexports.push([module.id, \"\", \"\", {\"version\":3,\"sources\":[],\"names\":[],\"mappings\":\"\",\"file\":\"deeplink.vue\",\"sourceRoot\":\"\"}]);\n\n// exports\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./~/.0.26.4@css-loader?{\"minimize\":true,\"sourceMap\":true}!./~/.11.3.4@vue-loader/lib/style-compiler?{\"id\":\"data-v-f94440f2\",\"scoped\":true,\"hasInlineConfig\":false}!./~/.6.0.3@sass-loader/lib/loader.js?{\"sourceMap\":true}!./~/.11.3.4@vue-loader/lib/selector.js?type=styles&index=0!./src/example/deeplink/deeplink.vue\n// module id = 740\n// module chunks = 63","module.exports={render:function (){var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;\n  return _c('Page', [_c('Header', [_c('Navbar', [_c('Title', [_vm._v(\"Deeplink\")])], 1)], 1), _vm._v(\" \"), _c('Content', {\n    staticClass: \"outer-content\",\n    attrs: {\n      \"padding\": \"\"\n    }\n  }, [_c('h5', [_vm._v(\"简介\")]), _vm._v(\" \"), _c('p', [_vm._v(\"Deeplink用于跳转到原生App的方法, 如果安装了App则启动app并跳转, 如果没安装app则进入下载页面. 我这里只安装了知乎和网易新闻, 没安装Twitter. \")]), _vm._v(\" \"), _c('h5', [_vm._v(\"原理\")]), _vm._v(\" \"), _c('p', [_vm._v(\"\\n            目前主流的H5跳转APP(知乎/网易新闻)都是使用的window.location.href进行的. 在IOS中使用Universal Links, 在Android中使用URL Scheme方案. 且Universal Links指向的页面都为下载引导页.\")]), _vm._v(\" \"), _c('p', [_vm._v(\"此外, IOS的跳转很流畅, 但是Android的实现相对不太好. 因为会出现下载链接的提示. 通过设置setTimeout的解决方式不能完全解决问题, 故上面两个平台都未处理. 如果处理的话, 监听页面visibilitychange等事件接触定时器即可. \")]), _vm._v(\" \"), _c('h5', [_vm._v(\"示例\")]), _vm._v(\" \"), _c('p', [_vm._v(\"知乎: JS判断APP是否安装?\")]), _vm._v(\" \"), _c('Grid', {\n    attrs: {\n      \"no-padding\": \"\"\n    }\n  }, [_c('Row', [_c('Column', [_c('Button', {\n    attrs: {\n      \"small\": \"\",\n      \"outline\": \"\"\n    },\n    on: {\n      \"click\": _vm.viewInZhihuApp\n    }\n  }, [_vm._v(\"在知乎App中浏览\")])], 1)], 1)], 1), _vm._v(\" \"), _c('p', [_vm._v(\"网易新闻: 刘强东力挺顺丰：我相信王卫为人，质疑菜鸟违法\")]), _vm._v(\" \"), _c('Grid', {\n    attrs: {\n      \"no-padding\": \"\"\n    }\n  }, [_c('Row', [_c('Column', [_c('Button', {\n    attrs: {\n      \"small\": \"\",\n      \"outline\": \"\"\n    },\n    on: {\n      \"click\": _vm.viewInNetEaseApp\n    }\n  }, [_vm._v(\"在网易新闻中浏览\")])], 1)], 1)], 1)], 1)], 1)\n},staticRenderFns: []}\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./~/.11.3.4@vue-loader/lib/template-compiler?{\"id\":\"data-v-f94440f2\"}!./~/.11.3.4@vue-loader/lib/selector.js?type=template&index=0!./src/example/deeplink/deeplink.vue\n// module id = 903\n// module chunks = 63"],"sourceRoot":""}